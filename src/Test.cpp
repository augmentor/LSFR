#include "Test.h"
#include "lfsr.h"

#include <stdint.h>

// REFERENCE DATASET 42
uint64_t  test_set_42[10][2] = {
{0, 0b100000000000000000000000000000000000000000},
{1, 0b000000101010001110011011110000010011101111},
{2, 0b000001010100011100110111100000100111011110},
{3, 0b000010101000111001101111000001001110111100},
{4, 0b000101010001110011011110000010011101111000},
{100,0b110110100001011100010111100100011011001111},
{663125524836, 0b011000010100100010010101000011000010001011},
{663124934834, 0b111101001101001100010011111010000110001001},
{663125229746, 0b111111110011010100101111010110110100111000},
{663125524658, 0b111110101110100111101000101110111011010001}
};

uint64_t  test_set_4[5][2] = {
{0, 0b1000},
{1, 0b0001},
{2, 0b0011},
{3, 0b0111},
{4, 0b1111}
};

int RunTest()
{
    int result = 0;

    for (size_t c = 0; c < 10; c++)
    {
        const uint64_t state = rfsr42( test_set_42[c][0], 1);
        result += (state == test_set_42[c][1])? 0 : 1;
    }

    return result;
}

int RunSmallTest()
{
    int result = 0;
    for (size_t c = 0; c < 5; c++)
    {
        const uint64_t state = rfsr4(test_set_4[c][0], 1);
        result += (state == test_set_4[c][1]) ? 0 : 1;
    }
    return result;
}

